/*! -- File: jquery.questionElement.js ( Input 0 ) -- */
!function(c){var l=function(a,b,d){var e=function(a,b,c){a=a||[];c=c||[];return a.filter(function(a){return 0===a.toLowerCase().indexOf(b.toLowerCase())&&0>c.indexOf(a)})},h=function(a,b){var c=a.key,d=a.altKey,e=a.ctrlKey,f=a.metaKey,h=["ArrowDown","ArrowUp","Enter"," "];("Tab"!==c||b)&&a.preventDefault();if(!b&&-1<h.indexOf(c))return 5;if("Home"===c)return 2;if("End"===c)return 3;if("Backspace"===c||"Clear"===c||1===c.length&&" "!==c&&!d&&!e&&!f)return 10;if(b){if("ArrowUp"===c&&d)return 1;if("ArrowDown"===
c&&!d)return 4;if("ArrowUp"===c)return 8;if("PageUp"===c)return 7;if("PageDown"===c)return 6;if("Escape"===c)return 0;if("Enter"===c||" "===c)return 1}},k=function(a,b,c){switch(c){case 2:return 0;case 3:return b;case 8:return Math.max(0,a-1);case 4:return Math.min(b,a+1);case 7:return Math.max(0,a-10);case 6:return Math.min(b,a+10);default:return a}},g=function(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=
(window.innerWidth||document.documentElement.clientWidth)},f={el:null,comboEl:null,listboxEl:null,idBase:null,options:b||[],activeIndex:d,open:!1,searchString:"",searchTimeout:null,init:function(){var b=this;f.el=c(a);f.el.find("dropdown-toggle").off("click.bs.dropdown");f.el.find("dropdown-toggle").removeAttr("data-toggle");f.comboEl=f.el.find(".pulldown_option");f.listboxEl=f.el.find("ul[role\x3dlistbox]");f.idBase=f.comboEl.attr("id")||"combo";if(f.comboEl.length&&f.listboxEl.length){f.el.off();
f.comboEl.off();-1<f.activeIndex&&f.comboEl.find(".selectedCont").text(f.options[f.activeIndex]);f.comboEl.on("blur",function(a){a.stopPropagation();a.preventDefault();f.onComboBlur.call(b,a)});f.listboxEl.on("focusout",function(a){a.stopPropagation();a.preventDefault();f.onComboBlur.call(b,a)});f.comboEl.on("click",function(a){a.stopPropagation();a.preventDefault();f.onComboClick.call(b,a)});f.comboEl.on("keydown",function(a){a.stopPropagation();f.onComboKeyDown.call(b,a)});for(var d=0;d<f.options.length;d++){var e=
f.createOption.call(this,f.options[d],d);f.listboxEl.append(e)}}},createOption:function(a,b){var d=this;a=c("\x3cli\x3e",{role:"option",id:f.idBase+"-"+b,"aria-selected":b===f.activeIndex?"true":"false",class:b===f.activeIndex?"combo-option option-current":"combo-option",text:a});a.on("click",function(a){a.stopPropagation();a.preventDefault();f.onOptionClick.call(d,b)});a.on("mousedown",function(a){a.stopPropagation();a.preventDefault();f.onOptionMouseDown.call(d)});return a},getSearchString:function(a){var b=
this;"number"===typeof f.searchTimeout&&window.clearTimeout(f.searchTimeout);f.searchTimeout=window.setTimeout(function(){b.searchString=""},500);f.searchString+=a;return f.searchString},onComboBlur:function(a){a=a.relatedTarget;a&&c.contains(f.listboxEl[0],a)||!f.open||(f.selectOption.call(this,f.activeIndex),f.updateMenuState.call(this,!1,!1))},onComboClick:function(){f.updateMenuState.call(this,!f.open,!1)},onComboKeyDown:function(a){var b=a.key,c=f.options.length-1,d=h(a,f.open);"undefined"!==
typeof d&&a.preventDefault();switch(d){case 3:case 2:f.updateMenuState.call(this,!0,!0);case 4:case 8:case 7:case 6:return a.preventDefault(),f.onOptionChange.call(this,k(f.activeIndex,c,d));case 1:a.preventDefault(),f.selectOption.call(this,f.activeIndex);case 0:return a.preventDefault(),f.updateMenuState.call(this,!1,!0);case 10:return f.onComboType.call(this,b);case 5:return a.preventDefault(),f.updateMenuState.call(this,!0,!0)}},onComboType:function(a){f.updateMenuState.call(this,!0,!0);var b=
f.getSearchString.call(this,a);a=f.options;var c=f.activeIndex+1,c="undefined"!==typeof c?c:0,c=a.slice(c).concat(a.slice(0,c)),d=e(c,b)[0];if(d)a=a.indexOf(d);else{b:{d=b.split("");if(d.length)for(var h=1;h<d.length;h++)if(d[h]!==d[0]){d=!1;break b}d=!0}d?(b=e(c,b[0]),a=a.indexOf(b[0])):a=-1}0<=a?f.onOptionChange.call(this,a):(window.clearTimeout(f.searchTimeout),f.searchString="")},onOptionChange:function(a){f.activeIndex=a;f.comboEl.attr("aria-activedescendant",f.idBase+"-"+a);var b=f.el.find("[role\x3doption]");
b.removeClass("option-current");b.eq(a).addClass("option-current");var c=f.listboxEl[0];if(c&&c.clientHeight<c.scrollHeight){var d=b[a],c=f.listboxEl[0],e=d.offsetTop,d=d.offsetHeight,h=c.offsetHeight,k=c.scrollTop;e<k?c.scrollTop=e:e+d>k+h&&(c.scrollTop=e-h+d)}g(b[a])||b[a].scrollIntoView({behavior:"smooth",block:"nearest"})},onOptionClick:function(a){f.onOptionChange.call(this,a);f.selectOption.call(this,a);f.updateMenuState.call(this,!1,!0)},onOptionMouseDown:function(){f.ignoreBlur=!0},selectOption:function(a){if(-1!=
a){f.activeIndex=a;var b=f.options[a];f.comboEl.find(".selectedCont").text(b);b=f.el.find("[role\x3doption]");b.attr("aria-selected","false");b.eq(a).attr("aria-selected","true")}},updateMenuState:function(a,b){b="undefined"===typeof b?!0:b;f.open!==a&&(f.open=a,f.comboEl.attr("aria-expanded",a?"true":"false"),a?f.el.addClass("open"):f.el.removeClass("open"),a=a?f.idBase+"-"+f.activeIndex:"",f.comboEl.attr("aria-activedescendant",a),""!==a||g(f.comboEl[0])||f.comboEl[0].scrollIntoView({behavior:"smooth",
block:"nearest"}),b&&f.comboEl.focus())}};f.init.call(this)},g=function(a,b){this.options=b;this.showCorrectAtEnd=this.allowInlineFeedback=!0;this.$el=c(a);this.initDB(b.outline);this.initSubscribers();this.attempts=this.score=0;this.type=b.outline.elementtype;this.setResponsive();return this};g.DEFAULTS={accessible:!0,passingMark:50,clickEvents:"click",outline:{},actionAPI:null,feedback:{correct:"",partial:"",incorrect:""},strings:{correct:"",partial:"",incorrect:"",submit:"Submit",tstchoicesLabel1:"You cannot choose more than",
tstchoicesLabel2:"selections.",showResult:"Show Answers",showGiven:"Show Submission",confirmQuestionNoSelection:"Are you sure you wish to submit this question without providing any answers?"}};g.constant=Object.freeze({screenReader:{visible:{tabindex:"1","aria-hidden":"false"},hidden:{tabindex:"-1","aria-hidden":"true"}}});g.prototype={initDB:function(a){this.db=function(){var a={},b={dragdrop_id:{}};return{store:function(c){a[c.id]=c;b.dragdrop_id[c.dragdrop_id]=a[c.id]},get:function(b){return a[b]},
getByKey:function(a,c){return b[a][c]},remove:function(b){delete a[item.id]},clear:function(){a={}},getLength:function(){return Object.keys(a).length}}}();var b=c.proxy(function(a){this.db.store(a);for(var c in a.elements)b(a.elements[c])},this);b(a)},initSubscribers:function(){var a=this;c("input",this.$el).on("focus",function(a){c(this).closest(".input-group-addon").addClass("focus-within")});c("input",this.$el).on("blur",function(a){c(".input-group-addon.focus-within").removeClass("focus-within")});
this.$el.on(this.options.clickEvent,".btn.retake",function(){c(this).hide();c(this).siblings(".submit").show();a.resetOptionClasses();a.resetOptionState();var b=a.$el.find(".dki-question-option input").first();b[0]&&b[0].focus();a.onRetake();return!1});this.$el.on("change","input",function(){a.onInputChange.call(a,c(this))});this.$el.on(this.options.clickEvent,".btn.submit:not(.showAnswers)",function(){c(this).hasClass("disabled")||a.submit()});this.$el.on(this.options.clickEvent,".btn.submit.showAnswers,.btn.showResult",
function(){c(this).toggleClass("full");var b="",d="";c(this).hasClass("full")?((b=a.showCorrectAnswers())&&(d="press enter to return to your answers or tab to continue."),c(this).html(a.options.strings.showGiven)):((b=a.showGivenAnswers())&&(d="for correct answers press enter or tab to continue"),c(this).html(a.options.strings.showResult),a.options.responsive||c(this).hide());b&&(c(this).attr("aria-describedby",""),c(this).attr("aria-description",b),c(this).attr("aria-label",d),c(this).attr("tabindex",
"-1"));var e=this;setTimeout(function(){a.options.responsive||c(e).hasClass("full")?(c(e).attr("tabindex","1"),c(e).focus()):(c(e).attr("tabindex","1"),c(e).show())},10)});this.$el.on(this.options.clickEvent,".dki-question-option .input-group-addon",function(b){if(b.target==this)return c(this).find("input").trigger(a.options.clickEvent),b.stopPropagation(),!1});this.$el.on(QuestionElementEvents.correct,function(b,c){a.allowInlineFeedback&&a.showFeedback("correct",c.score,c)});this.$el.on(QuestionElementEvents.incorrect+
" "+QuestionElementEvents.attemptIncorrect,function(b,c){a.allowInlineFeedback&&a.showFeedback("incorrect",c.score,c)});this.$el.on(QuestionElementEvents.partiallyCorrect+" "+QuestionElementEvents.attemptPartiallyCorrect,function(b,c){a.allowInlineFeedback&&a.showFeedback("partial",c.score,c)});c(document).on(DKI.ContentPage.events.started,function(b,c){!player.isSinglePage&&c.page.id!=a.options.outline.pageid||"dragTheWordQuestion"!=a.type||(a.$el.find(".options span.answer").droppable("option",
"disabled",!1),a.$el.find(".answers span").draggable("option","disabled",!1))})},hasRemainingAttempts:function(){return this.attempts<parseInt(this.options.outline.parameters.config.attempts)},getRemainingAttempts:function(){return Math.max(this.options.outline.parameters.config.attempts-this.attempts,0)},disableInputs:function(){this.$el.find("input, select").prop("disabled",!0)},enableInputs:function(){this.$el.find("input, select").prop("disabled",!1)},submit:function(a){this.hasRemainingAttempts()&&
this.checkIfAnswered(c.proxy(function(){a&&a();this.attempts+=1;this.disableInputs();var b=this.scoreQuestion();this.setState(b);this.variableUpdate(b)},this))},hasSelection:function(){return!1},checkIfAnswered:function(a){(this.hasSelection()||confirm(this.options.strings.confirmQuestionNoSelection))&&a()},setState:function(a){var b=this.$el.find(".feedback"),c=null;0<b.length&&b.attr("id")&&-1!==b.attr("id").indexOf("feedback_")&&(c=b.attr("id"));var e=this.$el.find(".submit").removeClass("showAnswers");
if(this.hasRemainingAttempts()&&100!=a){e.hide();var h=e.siblings(".retake");a="";null!=c&&(a=this.$el.find("#ariaScoringDetails_"+c));this.options.outline.parameters.config.showFeedback&&0<a.length&&""!=a.text().trim()?(b.addClass("showFeedback"),h.attr("aria-disabled","true"),h.attr("aria-description",""),h.attr("tabindex","-1"),a.attr("tabindex","1"),a.focus(),setTimeout(function(){h.attr("aria-disabled","false");h.css("display","inline-block");h.attr("tabindex","1")},10)):(h.css("display","inline-block"),
h.focus())}else{if(100!=a&&"trueFalseQuestion"!=this.type&&"multipleChoiceQuestion"!=this.type&&"imageMap"!=this.type&&"matchingQuestion"!=this.type&&"sequencingQuestion"!=this.type){e.hide();var k=e.siblings(".showResult");k.attr("title",this.options.strings.showResult).html(this.options.strings.showResult);null!=c&&(this.options.outline.parameters.config.showFeedback||this.options.outline.parameters.config.showScore)?(k.attr("aria-disabled","true"),k.attr("aria-description",""),k.attr("tabindex",
"-1"),b.attr("tabindex","1"),b.focus(),setTimeout(function(){k.attr("aria-description","for correct answers press enter or tab to continue");k.attr("aria-disabled","false");k.css("display","inline-block");k.attr("tabindex","1")},10)):(k.attr("aria-description","for correct answers press enter or tab to continue"),k.attr("aria-disabled","false"),k.css("display","inline-block"),k.attr("tabindex","1"),k.focus())}else e.attr("aria-disabled","true"),e.addClass("disabled").show().attr("tabindex","-1"),
null!=c&&(this.options.outline.parameters.config.showFeedback||this.options.outline.parameters.config.showScore)&&(b.attr("tabindex","1"),b.focus());e.siblings(".retake").hide()}},resetSubmitButton:function(){var a=this.$el.find(".btn.submit");a.css("display","block").siblings(".retake").css("display","none");a.removeClass("showAnswers disabled").html(this.options.strings.submit)},resetOptionClasses:function(){this.$el.find(".dki-element-content").removeClass("multiChoiceCorrectResponse correct incorrect");
this.$el.find(".correctOutline").removeClass("correctOutline")},resetOptionState:function(){this.$el.find(".dki-element-content .input-group").removeClass("checked").find("input").prop("checked",!1).prop("disabled",!1)},variableUpdate:function(a){this.options.outline.parameters.config.variable_id&&contentApi&&contentApi.setData(this.options.outline.parameters.config.variable_id,a)},fireScoredEvent:function(a,b){this.$el.trigger(QuestionElementEvents.attempted,b);a&&100!=b.score||this.$el.trigger(QuestionElementEvents.submitted,
b);b.score>=this.options.passingMark?this.$el.trigger(QuestionElementEvents.correct,b):0!=b.score?a?this.$el.trigger(QuestionElementEvents.attemptPartiallyCorrect,b):this.$el.trigger(QuestionElementEvents.partiallyCorrect,b):a?this.$el.trigger(QuestionElementEvents.attemptIncorrect,b):this.$el.trigger(QuestionElementEvents.incorrect,b)},setResponsive:function(){DKI.apply(this.__proto__,Object.create(g[this.options.responsive?"responsive":"fixed"]))},onRetake:function(){this.$el.find(".feedback").removeClass("showFeedback");
this.$el.trigger(QuestionElementEvents.retry);this.enableInputs()},destroy:function(){},onInputChange:function(a){this.$el.find(".input-group").removeClass("checked");c(".input-group input:checked",this.$el).each(function(){c(this).closest(".input-group").addClass("checked")})},reset:function(){this.resetOptionState();this.resetOptionClasses();this.resetSubmitButton();this.$el.find(".feedback").removeClass("showFeedback");this.attempts=0},export:function(){},import:function(){},setTestConfig:function(a){this.options.outline.parameters.config.attempts=
a.attempts;this.allowInlineFeedback=a.allowInlineFeedback;this.showCorrectAtEnd=a.showCorrectAtEnd}};g.responsive={showFeedback:function(a,b,d){var e=this;if((this.options.outline.parameters.config.showFeedback||this.options.outline.parameters.config.showScore)&&(!this.hasRemainingAttempts()||"correct"===a)||this.options.outline.parameters.config.feedback.showFeedbackOnEveryAttempt){var h="";this.options.outline.parameters.config.showScore&&(h+="\x3cdiv class\x3d'sr-only'\x3eyour score is:  "+b.toFixed(0)+
"%.\x3c/div\x3e");var k=this.options.outline.parameters.config.useProjectDefault?"\x3cdiv style\x3d'text-align:center'\x3e":"\x3cdiv\x3e";if(this.options.outline.parameters.config.showFeedback)var g=function(){var b=e.options.feedback[a];DKI.isObject(b)&&DKI.isDefined(b.text)&&(b=b.text);var d="";e.$el.find("input").each(function(){var a=c(this).data("id"),b=e.db.get(a),f=e.optionIsCorrect(this)&&e.options.outline.parameters.config.feedback.showCorrectChoices,h=!e.optionIsCorrect(this)&&e.options.outline.parameters.config.feedback.showIncorrectChoices;
(c(this).is(":checked")&&e.options.outline.parameters.config.feedback.showLearnerSelections||f||h)&&""!=c.trim(c("\x3cdiv /\x3e").html(b.parameters.config.feedback).text())&&(a=c("#content_"+a+" .numbering",e.$el).text(),""==a&&(a="\x26bull;\x26nbsp;"),d+="\x3cdiv class\x3d'optionFeedbackWrapper'\x3e",d+="\x3cspan class\x3d'optionFeedbackNumbering'\x3e",d+=a,d+="\x3c/span\x3e",d+="\x3cspan class\x3d'optionFeedbackContent'\x3e",d+=b.parameters.config.feedback,d+="\x3c/span\x3e",d+="\x3c/div\x3e")});
""!=d&&(""==b?1==(d.match(/&bull;/g)||[]).length&&(d=d.replace(/&bull;/g,"")):b+="\x3chr/\x3e",b+="\x3cdiv style\x3d'text-align: left; padding: 0;'\x3e"+d+"\x3c/div\x3e");return b}(),h=h+("\x3cdiv class\x3d'flex justify-center'\x3e"+k+g+"\x3c/div\x3e\x3c/div\x3e");this.options.outline.parameters.config.showScore&&(h+='\x3cdiv class\x3d\'gauge-wrapper\' tabindex\x3d\'-1\' aria-disable\x3d\'true\' aria-hidden\x3d\'true\'\x3e\x3cspan class\x3d\'gauge\'\x3e\x3cdiv\x3e\x3cdiv class\x3d"overlay"\x3e\x3cdiv tabindex\x3d"1" class\x3d"text dki-element-text"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mask full"\x3e\x3cdiv class\x3d"fill"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mask half"\x3e\x3cdiv class\x3d"fill"\x3e\x3c/div\x3e\x3cdiv class\x3d"fill fix"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/span\x3e\x3c/div\x3e');
h=this.$el.find(".feedback").html(h).addClass("showFeedback");if(this.options.outline.parameters.config.showScore){var f=h.find(".gauge \x3e div").addClass(a);f.RadialGauge({parentSelector:".gauge",startingPosition:0,showText:!1,asPercent:!0,ringSize:.25});h.find(".gauge \x3e div").RadialGauge("resize")}e.options.outline.parameters.config.showScore&&f.RadialGauge("setRotation",b.toFixed(0));b=h.find("*[tabindex\x3d'1']");b.attr("tabindex","-1");b.attr("aria-disable","true");b.attr("aria-hidden","true");
c(document).trigger(DKI.ContentPage.events.questionElementFeedbackShown)}this.options.outline.parameters.config.showFeedback&&(h=e.$el.find(".feedback"),b="",d&&d.ariaScoringDetailsText&&(b=d.ariaScoringDetailsText),0<h.length&&h.attr("id")&&-1!==h.attr("id").indexOf("feedback_")&&(h.find("#ariaScoringDetails_"+h.attr("id")).length||h.prepend("\x3cdiv id\x3d'ariaScoringDetails_"+h.attr("id")+"' class\x3d'sr-only'\x3e\x3c/div\x3e")),h.find("#ariaScoringDetails_"+h.attr("id")).html(b))}};g.fixed={showFeedback:function(a,
b){var d=this;if(this.options.outline.parameters.config.showFeedback){b=d.options.feedback[a];DKI.isObject(b)&&DKI.isDefined(b.text)&&(b=b.text);var e="";d.$el.find("input").each(function(){var a=c(this).data("id"),b=d.db.get(a),g=d.optionIsCorrect(this)&&d.options.outline.parameters.config.feedback.showCorrectChoices,f=!d.optionIsCorrect(this)&&d.options.outline.parameters.config.feedback.showIncorrectChoices;(c(this).is(":checked")&&d.options.outline.parameters.config.feedback.showLearnerSelections||
g||f)&&""!=c.trim(c("\x3cdiv /\x3e").html(b.parameters.config.feedback).text())&&(a=c("#content_"+a+" .numbering",d.$el).text(),""==a&&(a="\x26bull;\x26nbsp;"),e+="\x3cdiv class\x3d'optionFeedbackWrapper'\x3e",e+="\x3cspan class\x3d'optionFeedbackNumbering'\x3e",e+=a,e+="\x3c/span\x3e",e+="\x3cspan class\x3d'optionFeedbackContent'\x3e",e+=b.parameters.config.feedback,e+="\x3c/span\x3e",e+="\x3c/div\x3e")});""!=e&&(""!=b&&(b+="\x3chr\x3e"),b+="\x3cul style\x3d'text-align: left; padding: 0;'\x3e"+e+
"\x3c/ul\x3e");switch(a){case "correct":a="success";break;case "incorrect":a="danger";break;default:a="warning"}b&&DKI.PopupPanel.show({modal:!0,style:a,title:"",html:b,popupType:{type:"pop",mod:""},onHide:function(){d.$el.find(".retake").is(":visible")?d.$el.find(".retake").focus():d.$el.find(".showResult").is(":visible")&&setTimeout(function(){d.$el.find(".showResult").focus()},100)}})}}};g.TrueFalseQuestion=function(a,b){this.super=g;this.super.apply(this,arguments);return this};g.TrueFalseQuestion.prototype=
DKI.apply(Object.create(g.prototype),{getCorrectAnswer:function(){return"t"===this.options.outline.parameters.config.correctAnswer},showGivenAnswers:function(){this.resetOptionClasses();this.scoreQuestion(!0)},showCorrectAnswers:function(){var a=[],b=this;this.$el.find("input").each(function(){if(b.optionIsCorrect(this))return a.push(this),!1});this.showInlineFeedback(a,[],!0)},optionIsCorrect:function(a){return c(a).val()===this.getCorrectAnswer().toString()},scoreQuestion:function(a){var b=this.$el.find("input"),
d=b.filter(":checked"),e=[],h=[],g=this;c.each(b,function(){c(this).checked()&&(g.optionIsCorrect(this)?e.push(this):h.push(this))});b=e.length?100:0;this.showInlineFeedback(e,h);a||this.fireScoredEvent(this.getRemainingAttempts(),{score:b,correct:[this.getCorrectAnswer().toString()],selected:[d.val()]});return b},showInlineFeedback:function(a,b,d){if(this.options.outline.parameters.config.showFeedback||d){a=0==this.getRemainingAttempts()?c(a):c(a).filter(":checked");b=0==this.getRemainingAttempts()?
c(b):c(b).filter(":checked");var e=this;0==this.getRemainingAttempts()&&c.each(e.$el.find("input"),function(){e.optionIsCorrect(this)&&c(this).closest(".dki-element-content").addClass("multiChoiceCorrectResponse")});a.each(function(){c(this).closest(".dki-element-content").addClass("correct")});b.each(function(){c(this).closest(".dki-element-content").addClass("incorrect")})}},elementStart:function(){c(".question-title, .question-description, .btn.submit, .btn.retake, .dki-element-content input",
this.$el).attr({tabindex:this.options.accessible?"1":"-1"})},hasSelection:function(){return 0!==this.$el.find("input:checked").length}});g.MultipleChoiceQuestion=function(a,b){this.super=g;c(a).data("dki.MultipleChoiceQuestion",this.super.apply(this,arguments));this.setup();return this};g.MultipleChoiceQuestion.prototype=DKI.apply(Object.create(g.prototype),{setup:function(){this.$el.find(".question-option-image-magnifier").fancybox({transitionIn:"elastic",transitionOut:"elastic",speedIn:600,speedOut:200,
overlayShow:!1,lang:"en",i18n:{en:{CLOSE:DKI.strings.runtime.buttonLabelClose,NEXT:DKI.strings.runtime.buttonLabelNext,PREV:DKI.strings.index.previousButtonLabel}},afterLoad:function(a,b){DKI.enforceFocus(this.$slide.closest(".fancybox-inner"));this.$slide.closest(".fancybox-inner").find(".fancybox-infobar").attr("aria-hidden",!0);this.$slide.closest(".fancybox-container").attr("aria-label","Popup")},beforeShow:function(a){a=a.current.$slide.closest(".fancybox-inner");a.find("*[tabindex\x3d'1']").first()[0].focus();
a.find(".fancybox-button").attr("tabindex",1).filter(".disabled").attr("tabindex",-1)},btnTpl:{close:'\x3cbutton tabindex\x3d"1" aria-label\x3d"{{CLOSE}}" data-fancybox-close class\x3d"fancybox-button fancybox-button--close" title\x3d"{{CLOSE}}" style\x3d"opacity:1 !important;"\x3e\x3csvg tabindex\x3d"-1" aria-hidden\x3d"true" viewBox\x3d"0 0 40 40"\x3e\x3cpath d\x3d"M10,10 L30,30 M30,10 L10,30" /\x3e\x3c/svg\x3e\x3c/button\x3e',arrowLeft:'\x3cbutton tabindex\x3d"1" type\x3d"button" aria-label\x3d"{{PREV}}" data-fancybox-prev class\x3d"fancybox-button fancybox-button--arrow_left" title\x3d"{{PREV}}" href\x3d"javascript:;"\x3e\x3csvg tabindex\x3d"-1" aria-hidden\x3d"true" viewBox\x3d"0 0 40 40"\x3e\x3cpath d\x3d"M18,12 L10,20 L18,28 M10,20 L30,20"\x3e\x3c/path\x3e\x3c/svg\x3e\x3c/button\x3e',
arrowRight:'\x3cbutton tabindex\x3d"1" type\x3d"button" aria-label\x3d"{{NEXT}}" data-fancybox-next class\x3d"fancybox-button fancybox-button--arrow_right" title\x3d"{{NEXT}}" href\x3d"javascript:;"\x3e\x3csvg tabindex\x3d"-1" aria-hidden\x3d"true" viewBox\x3d"0 0 40 40"\x3e\x3cpath d\x3d"M10,20 L30,20 M22,12 L30,20 L22,28"\x3e\x3c/path\x3e\x3c/svg\x3e\x3c/button\x3e'}});this.setHeights()},setHeights:function(){c(".question-option-image-wrapper").length&&QuestionElementUtility.syncOptionHeightsToTallest(this.$el.find(".input-group"))},
onInputChange:function(a){c(".input-group input:checked",this.$el).length>this.options.outline.parameters.config.maxSelections?(a.prop("checked",!1),alert(this.options.strings.tstchoicesLabel1+" "+this.options.outline.parameters.config.maxSelections+" "+this.options.strings.tstchoicesLabel2)):this.super.prototype.onInputChange.apply(this,arguments)},optionIsCorrect:function(a){return this.db.get(c(a).data("id")).parameters.config.correct},optionAnswerIsCorrect:function(a){return this.optionIsCorrect(a)&&
c(a).checked()},showGivenAnswers:function(){this.resetOptionClasses();this.scoreQuestion(!0)},showCorrectAnswers:function(){var a=this;this.$el.find("input").each(function(){a.optionIsCorrect(this)&&c(this).closest(".dki-element-content").addClass("multiChoiceCorrectResponse")})},export:function(){var a={selectedIds:[]};c(".input-group input:checked",this.$el).each(function(){a.selectedIds.push(c(this).closest(".dki-questionOption-element").data("id"))});return a},import:function(a){var b=this;c.each(a.selectedIds,
function(){var a=b.$el.find(".dki-questionOption-element[data-id\x3d"+this+"]");a.find("input").prop("checked",!0);a.find(".input-group").addClass("checked")})},scoreQuestion:function(a,b,c){"undefined"!=typeof c&&c&&this.attempts++;c=this.getScoringDetails();b||this.showInlineFeedback(c.correct,c.incorrect);a||this.fireScoredEvent(this.getRemainingAttempts(),{score:c.score,correct:c.correctPattern,selected:c.submittedPattern});return c.score},getScoringDetails:function(){var a=this.$el.find("input"),
b=this,d=0,e=0,h=[],g=[],p=[],f=[];c.each(a,function(a,n){n=b.db.get(c(this).data("id"));var q=b.optionIsCorrect(this),m=b.optionAnswerIsCorrect(this);d+=q?1:0;m?h.push(this):!1;!m&&c(this).checked()?g.push(this):!1;var l=c(this).closest(".dki-element-content");q?p.push({short:b.options.outline.parameters.config.numbering?l.find("span.numbering").html().replace(")","").trim():(a+1).toString(),long:l.find("label .dki-element-text").html(),outline:n}):c(this).checked()&&e--;c(this).checked()&&f.push({short:b.options.outline.parameters.config.numbering?
l.find("span.numbering").html().replace(")","").trim():(a+1).toString(),long:l.find("label .dki-element-text").html(),outline:n});m&&e++});0>=e?(a=0,0==e&&0==d&&(a=100)):a=e/d*100;return{totalCorrect:d,correct:h,incorrect:g,correctPattern:p,submittedPattern:f,score:a}},hasInlineFeedback:function(){return this.options.outline.parameters.config.showFeedback},showInlineFeedback:function(a,b,d){if(this.hasInlineFeedback()||d){a=0==this.getRemainingAttempts()?c(a):c(a).filter(":checked");b=0==this.getRemainingAttempts()?
c(b):c(b).filter(":checked");var e=this;a.each(function(){c(this).closest(".dki-element-content").addClass("correct")});b.each(function(){e.db.get(c(this).data("id"));c(this).closest(".dki-element-content").addClass("incorrect")});e.showCorrectAtEnd&&0==this.getRemainingAttempts()&&e.showCorrectAnswers()}},elementStart:function(){c(".question-title, .question-description, input, .btn.submit, .btn.retake",this.$el).attr({tabindex:this.options.accessible?"1":"-1"})},hasSelection:function(){return 0!==
this.$el.find("input:checked").length},getSelectedOptions:function(){var a=this,b=[];this.$el.find("input").filter(":checked").each(function(){b.push(a.db.get(c(this).data("id")))});return b},getOptions:function(){var a=this,b=[];this.$el.find("input").each(function(){b.push(a.db.get(c(this).data("id")))});return b}});g.MultiplePulldownQuestion=function(a,b){this.super=g;this.super.apply(this,arguments);this.setup();return this};g.MultiplePulldownQuestion.prototype=DKI.apply(Object.create(g.prototype),
{setup:function(){var a=this;this.$el.find(".pulldown_option").each(function(){var b=a.db.getByKey("dragdrop_id",c(this).data("dragdrop-id")),d=c(this),e=d.closest(".btn-group"),h=e.find(".dropdown-menu");d.attr({role:"combobox","aria-haspopup":"listbox","aria-expanded":"false"});h.attr({id:"dropdown_"+c(this).data("dragdrop-id"),role:"listbox"});d.attr("aria-controls","dropdown_"+c(this).data("dragdrop-id"));var b=b?DKI.utility.shuffle(b.meta.split("/,")):[],g=[];c.each(b,function(a,b){a=DKI.stripHTML(this);
g.push(a)});new l(e[0],g,-1)})},optionIsCorrect:function(a){return c("\x3cdiv/\x3e").append(this.getCorrectOptionValue(a)).text().trim()===c(a).find(".selectedCont").text().trim()},getCorrectOptionValue:function(a){return this.db.getByKey("dragdrop_id",c(a).data("dragdrop-id")).meta.split("/,")[0].trim()},showGivenAnswers:function(){var a=this;this.resetOptionClasses();var b=0,d="your answers: ";this.$el.find(".pulldown_option").each(function(){var e=c(this).data("dragdrop-id");"undefined"!==typeof a.answered[e]?
(c(this).find(".selectedCont").text(a.answered[e]),d+=b+1+". "+a.answered[e].trim()+". "):d+=b+1+". . ";b++});this.scoreQuestion(!0);var e=this.$el.find(".feedback"),h=null;0<e.length&&e.attr("id")&&-1!==e.attr("id").indexOf("feedback_")&&(h=e.attr("id"));if(h)return this.options.outline.parameters.config.showFeedback&&this.options.responsive?this.$el.find("#ariaScoringDetails_"+h).text():d},showCorrectAnswers:function(){var a=this.$el.find(".pulldown_option"),b=this,d=[];this.answered||(this.answered=
{},a.each(function(){b.answered[c(this).data("dragdrop-id")]=c(this).find(".selectedCont").text()}));var e=0,h="correct answers: ";this.resetOptionClasses();a.each(function(){d.push(this);c(this).find(".selectedCont").text(b.getCorrectOptionValue(this));h+=e+1+". "+b.getCorrectOptionValue(this)+". ";e++});this.showInlineFeedback(d,[],!0);return h},scoreQuestion:function(a){var b=this.$el.find(".pulldown_option"),d=this,e=0,h=[],g=[],p=[],f=[],l="your answers: ";c.each(b,function(a,b){b=d.db.getByKey("dragdrop_id",
c(this).data("dragdrop-id"));optionCorrect=d.optionIsCorrect(this);e+=optionCorrect?1:0;optionCorrect?h.push(this):g.push(this);l+=a+1+". "+c(this).text().trim()+". "+(optionCorrect?"correct":"incorrect")+". ";c(this).closest(".dki-element-content");p.push(b.meta.split("/,")[0]);f.push(c(this).find(".selectedCont").text())});b=e/this.options.outline.elements.length*100;this.showInlineFeedback(h,g);var n=c("\x3cdiv\x3e").html(this.$el.find(".options").html());n.find("span.dki-question-option").replaceWith("_____");
a||this.fireScoredEvent(this.getRemainingAttempts(),{score:b,correct:p,selected:f,body:n.text(),ariaScoringDetailsText:l});return b},showInlineFeedback:function(a,b,d){if(this.options.outline.parameters.config.showFeedback||d){var e=this;c.each(a,function(){c(this).closest(".dki-question-option").addClass("correct multiChoiceCorrectResponse")});c.each(b,function(){var a="incorrect";e.db.getByKey("dragdrop_id",c(this).data("dragdrop-id")).parameters.config.correct&&!c(this).checked()&&(a="multiChoiceCorrectResponse");
c(this).closest(".dki-question-option").addClass(a)})}},clearSubmitted:function(){this.$el.find(".feedback").html("");this.$el.find(".btn.showResult").hide();this.$el.find(".selectedCont").text("").prop("disabled",!1)},onRetake:function(){this.super.prototype.onRetake.call(this);this.clearSubmitted();this.$el.find(".pulldown_option:first").focus()},reset:function(){this.super.prototype.reset.call(this);delete this.answered;this.clearSubmitted()},elementStart:function(){c(".question-title, .options, .btn.submit, .btn.retake, .dki-element-content .pulldown_option",
this.$el).attr({tabindex:this.options.accessible?"1":"-1"})},hasSelection:function(){for(var a=this.$el.find("select").toArray(),b=0;b<a.length;b++)if(""==c(a[b]).val())return!1;return!0}});g.FillInTheBlanksQuestion=function(a,b){this.super=g;c(a).data("dki.FillInTheBlanksQuestion",this.super.apply(this,arguments));this.setup();return this};g.FillInTheBlanksQuestion.prototype=DKI.apply(Object.create(g.prototype),{setup:function(){this.$el.on("change","input",function(){var a=c(this),b=""!=a.val().trim()?
" \x26nbsp; ":a.data("empty-label");a.prev().html(b)});this.$el.on("focus","input",function(){var a=c(this);a.attr("aria-describedby",a.data("aria-describedby"))});this.$el.on("blur","input",function(){var a=c(this),b=""!=a.val().trim()?"\x26nbsp;":a.data("empty-label");a.attr("aria-describedby","");a.prev().html(b)})},optionIsCorrect:function(a){var b=c(a).val().trim(),b=this.options.outline.parameters.config.caseSensitive?b:b.toLowerCase();return~jQuery.inArray(b,this.getCorrectOptionValues(a))?
!0:!1},getCorrectOptionValues:function(a){a=this.db.getByKey("dragdrop_id",c(a).data("dragdrop-id"));var b=this;return a?a.meta.split("/,").map(function(a){return(b.options.outline.parameters.config.caseSensitive?a:a.toLowerCase()).trim()}):""},showGivenAnswers:function(){var a=this;this.resetOptionClasses();this.answered||(this.answered={});var b=0,d="your answers: ";this.$el.find("input[type\x3d'text']").each(function(){var e=c(this).data("dragdrop-id");"undefined"!==typeof a.answered[e]?(c(this).val(a.answered[e]),
d+=b+1+". "+a.answered[e].trim()+". "):d+=b+1+". . ";b++});this.scoreQuestion(!0);var e=this.$el.find(".feedback"),h=null;0<e.length&&e.attr("id")&&-1!==e.attr("id").indexOf("feedback_")&&(h=e.attr("id"));if(h)return this.options.outline.parameters.config.showFeedback&&this.options.responsive?this.$el.find("#ariaScoringDetails_"+h).text():d},showCorrectAnswers:function(){var a=this.$el.find("input[type\x3d'text']"),b=this,d=[];this.answered||(this.answered={},a.each(function(){b.answered[c(this).data("dragdrop-id")]=
c(this).val()}));var e=0,h="correct answers: ";this.resetOptionClasses();a.each(function(){d.push(this);c(this).val(b.getCorrectOptionValues(this)[0]);h+=e+1+". "+b.getCorrectOptionValues(this)[0]+". ";e++});this.showInlineFeedback(d,[],!0);return h},export:function(){var a={answered:{}};this.$el.find("input[type\x3d'text']").each(function(){a.answered[c(this).data("dragdrop-id")]=c(this).val()});return a},import:function(a){this.answered=a.answered},scoreQuestion:function(a){a=this.getScoringDetails();
this.fireScoredEvent(this.getRemainingAttempts(),a);return a.score},getScoringDetails:function(){var a=this.$el.find("input"),b=this,d=0,e=[],h=[],g=[],p=[],f=[],l="your answers: ";c.each(a,function(a,m){if(m=b.db.getByKey("dragdrop_id",c(this).data("dragdrop-id")))f.push(m.elementid),m=b.optionIsCorrect(this),l+=a+1+". "+c(this).val().trim()+". "+(m?"correct":"incorrect")+". ",d+=m?1:0,m?e.push(this):h.push(this),c(this).closest(".dki-element-content"),g.push(b.getCorrectOptionValues(this)),p.push(c(this).val())});
a=d/this.options.outline.elements.length*100;this.showInlineFeedback(e,h);var n=c("\x3cdiv\x3e").html(this.$el.find(".options").html());n.find("span.dki-question-option").replaceWith("_____");return{score:a,correct:g,selected:p,body:n.text(),optionEls:f,ariaScoringDetailsText:l}},hasInlineFeedback:function(){return this.options.outline.parameters.config.showFeedback},showInlineFeedback:function(a,b,d){if(this.options.outline.parameters.config.showFeedback||d){var e=this;c.each(a,function(){c(this).closest(".dki-question-option").addClass("correct multiChoiceCorrectResponse")});
c.each(b,function(){e.db.getByKey("dragdrop_id",c(this).data("dragdrop-id"))&&c(this).closest(".dki-question-option").addClass("incorrect")})}},clearSubmitted:function(){this.$el.find(".feedback").html("");this.$el.find(".btn.showResult").hide();this.$el.find("input").val("").prop("disabled",!1);this.$el.find("input").each(function(){var a=c(this);a.prev().html(a.data("empty-label"))})},onRetake:function(){this.super.prototype.onRetake.call(this);this.clearSubmitted()},reset:function(){this.super.prototype.reset.call(this);
delete this.answered;this.clearSubmitted()},elementStart:function(){c(".btn.submit, .btn.retake, input, .question-title, .options",this.$el).attr({tabindex:this.options.accessible?"1":"-1"})},hasSelection:function(){for(var a=this.$el.find("input[type\x3d'text']").toArray(),b=0;b<a.length;b++)if(""==c(a[b]).val())return!1;return!0}});g.ClickTheWordQuestion=function(a,b){this.super=g;this.super.apply(this,arguments);this.setup();return this};g.ClickTheWordQuestion.prototype=DKI.apply(Object.create(g.prototype),
{setup:function(){var a=this;this.$el.on("click",".options:not(.submitted) span",function(){if(a.getCurrentSelectedCount()<a.answers.length||c(this).hasClass("selected"))c(this).toggleClass("selected"),a.setCounter()});var b=this.$el.find(".options").attr({"aria-multiselectable":"true",role:"listbox"}).find("span");this.options.accessible&&(b.first().attr("tabindex","1"),b.on("keyup",function(a){var b="";switch(a.which){case 37:case 40:b="prev";break;case 39:case 38:b="next"}""!=b&&(a=c(this)[b]("span"),
a.length&&(a.attr("tabindex","1")[0].focus(),c(this).attr("tabindex","-1")))}));this.answers=b.filter(".answer");this.answers.removeClass("answer");this.options.responsive&&(this.scrollWith=DKI.func.scrollWith(this.$el.find(".info"),this.$el,{offsetTop:parseInt(c("body").css("margin-top").replace("px"),10),offsetBottom:125,onWinResize:function(a){a.offsetTop=parseInt(c("body").css("margin-top").replace("px"),10)}}),this.scrollWith.start());this.setCounter()},getCurrentSelectedCount:function(){return this.$el.find("span.selected").length},
setCounter:function(){this.counter||(this.counter=this.$el.find(".counter"));this.counter.html(this.getCurrentSelectedCount()+"/"+this.answers.length)},spanifyMeta:function(){},showGivenAnswers:function(){this.answers.removeClass("correctOutline");var a="your answers: ";this.$el.find(".selected").each(function(b){a+=b+1+". "+c(this).text().trim()+". "});var b=this.$el.find(".feedback"),d=null;0<b.length&&b.attr("id")&&-1!==b.attr("id").indexOf("feedback_")&&(d=b.attr("id"));if(d)return this.options.outline.parameters.config.showFeedback&&
this.options.responsive?this.$el.find("#ariaScoringDetails_"+d).text():a},showCorrectAnswers:function(){this.answers.addClass("correctOutline");var a="correct answers: ";this.answers.each(function(b){a+=b+1+". "+c(this).text().trim()+". "});return a},scoreQuestion:function(a){var b=this.answers,d=b.filter(".selected"),e="your answers: ";this.showInlineFeedback(d,this.$el.find("span.selected").map(function(a,b){var g=0==d.filter(b).length;e+=a+1+". "+c(b).text().trim()+". "+(g?"incorrect":"correct")+
". ";if(g)return b}));b=d.length/b.length*100;a||this.fireScoredEvent(this.getRemainingAttempts(),{score:b,correct:[d],ariaScoringDetailsText:e});return b},showInlineFeedback:function(a,b,c){this.options.outline.parameters.config.showFeedback&&(a.addClass("dki-element-content dki-question-option correct multiChoiceCorrectResponse"),b.addClass("dki-element-content dki-question-option incorrect"),this.hasRemainingAttempts()||this.answers.addClass("correctOutline"))},submit:function(a){g.prototype.submit.call(this,
c.proxy(function(){this.$el.find(".options").addClass("submitted")},this))},clearSubmitted:function(){this.$el.find(".feedback").html("");this.$el.find(".btn.showResult").hide();this.$el.find(".options").removeClass("submitted").find(".selected").removeClass("selected dki-element-content dki-question-option")},onRetake:function(){this.super.prototype.onRetake.call(this);this.clearSubmitted()},reset:function(){this.super.prototype.reset.call(this);this.clearSubmitted()},destroy:function(){this.scrollWith&&
(this.scrollWith.stop(),this.scrollWith=null)},elementStart:function(){c(".btn.submit, .btn.retake, .info .question-title",this.$el).attr({tabindex:this.options.accessible?"1":"-1"})},hasSelection:function(){return this.$el.find(".options .selected").length?!0:!1}});g.DragTheWordQuestion=function(a,b){this.super=g;this.super.apply(this,arguments);this.answers=b.outline.answers;this.setup();return this};g.DragTheWordQuestion.prototype=DKI.apply(Object.create(g.prototype),{setup:function(){var a=this;
this.$el.on("click",".answerNav:not(.disabled)",function(){var b=a.$el.find(".answers"),d=b.find(".selected"),e=c(d.get(0));c(this).hasClass("fa-chevron-right")?d.get(1)&&(b.prepend(c(d.get(1)).detach()),b.append(e.detach())):b.prepend(b.find(".selected").last().detach());b.children().get(0).focus()});this.$el.on("keydown",".answerPool",function(a){39==a.which?c(this).find(".answerNav.fa-chevron-right").trigger("click"):37==a.which&&c(this).find(".answerNav.fa-chevron-left").trigger("click")});this.$el.on("click",
".answerPool.selectAnswer .selected, .options span.answer, .options span.selected",function(){var b=a.$el.find(".info .answerPool").data("toSelect");if(b&&b[0]!==this){var d=c(this);b.hasClass("selected")&&(d=b,b=c(this));if(!d.hasClass("answer"))return c(this).parent().hasClass("answers")||c(this).addClass("moved"),b=a.setDrop(d,b),a.setAnswerSelectMode(!1),b[0].focus(),!1}});this.$el.on("click",".options span.answer, .options span.selected",function(){if(c(this).parent()[0]&&!c(this).hasClass("moved")&&
(a.setAnswerSelectMode(!0,c(this)),!c(this).hasClass("selected"))){var b=a.$el.find(".info .answerPool .selected").get(0);b&&b.focus()}c(this).removeClass("moved")});this.setupAnswerPool();this.options.responsive&&(this.scrollWith=DKI.func.scrollWith(this.$el.find(".info"),this.$el,{offsetTop:parseInt(c("body").css("margin-top").replace("px"),10),offsetBottom:125,onWinResize:function(a){a.offsetTop=parseInt(c("body").css("margin-top").replace("px"),10)}}),this.scrollWith.start());this.initInteractions();
this.setCounter()},setAnswerSelectMode:function(a,b){this.$el.find(".info .answerPool")[a?"addClass":"removeClass"]("selectAnswer").data("toSelect",a?b:null).find(".selected").attr(g.constant.screenReader[a?"visible":"hidden"])},getCurrentSelectedCount:function(){return this.$el.find(".options span.selected").length},setupAnswerPool:function(){var a=this.$el.find(".info .answers").html(""),b=a.closest(".answerPool");c.each(DKI.utility.shuffle(this.answers.slice(0)),function(b,c){a.append("\x3cspan class\x3d'selected answerDrag'\x3e"+
c+"\x3c/span\x3e")});var d=a.find(".answerDrag").first().outerHeight(!0),d=Math.max(d,parseInt(b.css("min-height")));b.css("min-height",d)},disableNav:function(){this.$el.find(".answerNav").addClass("disabled")},enabledNav:function(){this.$el.find(".answerNav").removeClass("disabled")},initInteractions:function(){var a=!player.isSinglePage&&contentApi.getPageID()!=this.options.outline.pageid&&(!player.contentPage.lightBoxPage||player.contentPage.lightBoxPage.page.id!=this.options.outline.pageid),
b=this;this.$el.find(".answers span").draggable({disabled:a,helper:"clone",appendTo:"#content_"+this.options.outline.id,start:function(a,b){b.helper.css({"z-index":15,cursor:"grabbing"});c(this).css("opacity",0)},drag:function(a,b){DKI.utility.dragFix(b)},stop:function(a,b){c(this).css("opacity","")}}).droppable({accept:".answerDrag",tolerance:"pointer",drop:function(a,e){b.setDrop(e.draggable,c(this))},disabled:!1});this.$el.find(".options span.answer").droppable({accept:".answerDrag",tolerance:"pointer",
drop:function(a,e){b.setDrop(e.draggable,c(this))},disabled:a})},setDrop:function(a,b){if(b.hasClass("selected")){var c=a.html();a.html(b.html());b.html(c);return b}a.data("from")&&(a.before(a.data("from")),a.data("from",""));b.before(a.detach());a.data("from",b.detach());this.setCounter();1===this.$el.find(".answers .selected").length&&this.disableNav();return a},setCounter:function(){this.counter||(this.counter=this.$el.find(".counter"));this.counter.html(this.getCurrentSelectedCount()+"/"+this.answers.length)},
disableQuestion:function(){var a=this.$el.find(".answer,.selected");a.filter(".ui-draggable").draggable("destroy");a.filter(".ui-droppable").droppable("destroy");this.$el.find(".info").addClass("ended");this.options.responsive&&this.scrollWith.stop(!0)},showGivenAnswers:function(){var a=this,b="your answers: ";this.$el.find(".options span.answer, .options span.selected").each(function(d,e){c(this).html(a.answered[d]);b+=d+1+". "+a.answered[d].trim()+". "});this.resetOptionClasses();this.scoreQuestion(!0);
var d=this.$el.find(".feedback"),e=null;0<d.length&&d.attr("id")&&-1!==d.attr("id").indexOf("feedback_")&&(e=d.attr("id"));if(e)return this.options.outline.parameters.config.showFeedback&&this.options.responsive?this.$el.find("#ariaScoringDetails_"+e).text():b},showCorrectAnswers:function(){var a=this,b=this.$el.find(".options span.answer, .options span.selected");this.answered||(this.answered=[],b.each(function(){a.answered.push(c(this).text())}));var d="correct answers: ";b.each(function(b,h){c(this).html(a.answers[b]);
d+=b+1+". "+a.answers[b].trim()+". "});this.resetOptionClasses();this.scoreQuestion(!0);return d},scoreQuestion:function(a){var b=this.answers,d=this.$el.find(".options span.answer, .options span.selected"),e=[],h=[],g="your answers: ";d.each(function(a,d){if(c(this).hasClass("answerDrag")&&c(this).text()===b[a])return g+=a+1+". "+c(this).text().trim()+". correct. ",e.push(c(this)),!0;h.push(c(this));g+=a+1+". "+c(this).text().trim()+". incorrect. "});this.disableQuestion();this.showInlineFeedback(e,
h);var l=e.length/b.length*100;a||this.fireScoredEvent(this.getRemainingAttempts(),{score:l,correct:e,selected:d.toArray().map(function(a){return c(a).text()}),ariaScoringDetailsText:g});return l},showInlineFeedback:function(a,b,d){if(this.options.outline.parameters.config.showFeedback||d)c(a).map(function(){return this.toArray()}).addClass("selected dki-element-content dki-question-option correct multiChoiceCorrectResponse").removeClass("answer"),c(b).map(function(){return this.toArray()}).addClass("selected dki-element-content dki-question-option incorrect").removeClass("answer")},
submit:function(a){g.prototype.submit.call(this,c.proxy(function(){this.$el.find(".options").addClass("submitted")},this))},clearSubmitted:function(){this.$el.find(".feedback").html("");this.$el.find(".btn.showResult").hide();this.$el.find(".options span.answer, .options span.selected").attr("class","answer border-only fa fa-bullseye").html("");this.setupAnswerPool();this.initInteractions();this.setCounter();this.enabledNav();this.$el.find(".info").removeClass("ended")},onRetake:function(){this.super.prototype.onRetake.call(this);
this.clearSubmitted();this.options.responsive&&this.scrollWith.start()},reset:function(){this.super.prototype.reset.call(this);this.clearSubmitted()},destroy:function(){this.scrollWith&&(this.scrollWith.stop(),this.scrollWith=null)},elementStart:function(){c(".btn.submit, .btn.retake, .info .question-title, .options, .options .answer",this.$el).attr({tabindex:this.options.accessible?"1":"-1"})},hasSelection:function(){return this.$el.find(".answerPool .answers").children().length?!1:!0}});g.ImageMap=
function(a,b){this.super=g;this.super.apply(this,arguments);this.mapEl=c(a);return this};g.ImageMap.prototype=DKI.apply(Object.create(g.prototype),{showCorrectAnswers:function(){this.mapEl.ImageMap("enterReview",!0,!1,!0)},scoreQuestion:function(a){var b=this.mapEl.data("dki.ImageMap").score();this.showInlineFeedback(100==b);a||this.fireScoredEvent(this.getRemainingAttempts(),{score:b,imageMapData:this.mapEl.data("dki.ImageMap")});return b},showInlineFeedback:function(a){if(0==this.getRemainingAttempts()||
a)this.mapEl.data("dki.ImageMap").enterReview(!0,!1,!0),this.mapEl.ImageMap("showInlineFeedback",function(){},!this.inReview)},elementStart:function(){c(".question-title, .question-description, .btn.submit, .btn.retake, .dki-element-content input",this.$el).attr({tabindex:this.options.accessible?"1":"-1"})},hasSelection:function(){return this.mapEl.data("dki.ImageMap").hasSelection()},reset:function(){this.mapEl.data("dki.ImageMap").reset();this.resetSubmitButton();this.$el.find(".feedback").removeClass("showFeedback");
this.attempts=0},disableInputs:function(){this.mapEl.ImageMap("disable")},enableInputs:function(){this.mapEl.ImageMap("enable")},resetOptionState:function(){this.mapEl.ImageMap("reset");this.enableInputs()}});g.MatchingQuestion=function(a,b){this.super=g;this.super.apply(this,arguments);this.questionEl=c(a);return this};g.MatchingQuestion.prototype=DKI.apply(Object.create(g.prototype),{showCorrectAnswers:function(){this.questionEl.data("dki.MatchingQuestion").enterReview(!0)},scoreQuestion:function(a){var b=
this.questionEl.data("dki.MatchingQuestion").score();this.showInlineFeedback(100==b);a||this.fireScoredEvent(this.getRemainingAttempts(),{score:b,matchingQuestionData:this.questionEl.data("dki.MatchingQuestion")});return b},showInlineFeedback:function(a){(0==this.getRemainingAttempts()||a)&&this.questionEl.data("dki.MatchingQuestion").showInlineFeedback(!0)},elementStart:function(){c(".question-title, .question-description, .btn.submit, .btn.retake, .dki-element-content input",this.$el).attr({tabindex:this.options.accessible?
"1":"-1"})},hasSelection:function(){return this.questionEl.data("dki.MatchingQuestion").hasSelection()},reset:function(){this.questionEl.data("dki.MatchingQuestion").reset();this.resetSubmitButton();this.$el.find(".feedback").removeClass("showFeedback");this.attempts=0}});g.SequencingQuestion=function(a,b){this.super=g;this.super.apply(this,arguments);this.questionEl=c(a);return this};g.SequencingQuestion.prototype=DKI.apply(Object.create(g.prototype),{showCorrectAnswers:function(){this.questionEl.data("dki.SequencingQuestion").enterReview(!0)},
scoreQuestion:function(a){var b=this.questionEl.data("dki.SequencingQuestion").score();this.showInlineFeedback(100==b);a||this.fireScoredEvent(this.getRemainingAttempts(),{score:b,sequencingQuestionData:this.questionEl.data("dki.SequencingQuestion")});return b},showInlineFeedback:function(a){(0==this.getRemainingAttempts()||a)&&this.questionEl.data("dki.SequencingQuestion").showInlineFeedback(!0)},elementStart:function(){c(".question-title, .question-description, .btn.submit, .btn.retake, .dki-element-content input",
this.$el).attr({tabindex:this.options.accessible?"1":"-1"})},hasSelection:function(){return this.questionEl.data("dki.SequencingQuestion").hasSelection()},reset:function(){this.super.prototype.reset.call(this);this.questionEl.data("dki.SequencingQuestion").reset()},resetOptionClasses:function(){this.$el.find(".card_container").removeClass("multiChoiceCorrectResponse correct incorrect")}});var r=function(a,b){var c=b.outline.elementtype,c=c.charAt(0).toUpperCase()+c.slice(1);return g[c]?new g[c](a,
b):new g(a,b)};c.fn.QuestionElement=function(a){var b=a,d=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=c(this),h=c(this).data("dki.QuestionElement");options=c.extend(!0,{},g.DEFAULTS,"object"===typeof b&&b);if("string"===typeof a&&!h)return!1;h?"string"===typeof a&&(e=c(this).data("dki.QuestionElement"))&&e[a]&&e[a].apply(c(this).data("dki.QuestionElement"),d):e.data("dki.QuestionElement",r(this,options))})};c.fn.QuestionElement.Constructor=g}(window.jQuery);
QuestionElementEvents={submitted:"SUBMIT",attempted:"ATTEMPT",correct:"CORRECT",incorrect:"INCORRECT",partiallyCorrect:"PARTIALLY_CORRECT",attemptPartiallyCorrect:"ATTEMPT_PARTIALLY_CORRECT",attemptIncorrect:"ATTEMPTY_INCORRECT",retry:"RETRIED"};QuestionElementUtility={syncOptionHeightsToTallest:function(c){var l=0;c.css("min-height","").each(function(){l=Math.max(l,$(this).outerHeight())});c.css("min-height",l)}};